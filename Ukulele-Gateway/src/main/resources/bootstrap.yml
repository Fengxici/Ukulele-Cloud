server:
  port: 7070

spring:
  application:
    name: gateway
  security:
    user:
      name: root
      password: root
  main:
    allow-bean-definition-overriding: true

eureka:
  instance:
    hostname: localhost
    prefer-ip-address: true
    instance-id: ${eureka.instance.hostname}:${server.port}
    metadata-map:
      user.name: root
      user.password: root
  client:
    serviceUrl:
      #      defaultZone: http://root:root@192.168.0.109:8080/eureka
      defaultZone: http://root:root@127.0.0.1:8080/eureka

zuul:
  host:
    connect-timeout-millis: 10000
    socket-timeout-millis: 60000
  routes:
    portal-service:
      path: /api/portal-service/**
      serviceId: portal-service
    user-service:
      path: /api/user-service/**
      serviceId: user-service
    syslog-service:
      path: /api/syslog-service/**
      serviceId: syslog-service
    auth-service:
      path: /api/auth-service/**
      serviceId: auth-service
  #添加代理头
  add-proxy-headers: true
  # 需要聚合的swagger服务
  swagger:
    serviceIds: user-service,syslog-service,portal-service

proxy:
  auth:
    routes:
      portal-service: oauth2
      user-service: oauth2
      syslog-service: oauth2
      auth-service: oauth2
#security:
#  oauth2:
#    resource:
#      jwt:
#        key-uri: http://${AUTH_CENTER_HOST:localhost}:${AUTH_CENTER_PORT:18001}/auth/oauth/token_key
#      id: ${spring.application.name}
#      serviceId: ${spring.application.name}

security:
  oauth2:
    #    client:
    #      access-token-uri: http://localhost:9090/auth/oauth/token #令牌端点
    #      user-authorization-uri: http://localhost:9090/auth/oauth/authorize #授权端点
    #      client-id: test #OAuth2客户端ID
    #      client-secret: test #OAuth2客户端密钥
    resource:
      jwt:
        key-uri: http://localhost:9090/auth/oauth/token_key
      id: ${spring.application.name}
      serviceId: ${spring.application.name}
#security:
#  oauth2:
#    sso:
#      loginPath: /login   # 登录路径
#    client:
#      clientId: client
#      clientSecret: secret
#      userAuthorizationUri: http://localhost:8081/oauth/authorize
#      access-token-uri: http://localhost:8081/oauth/token
#    resource:
#      userInfoUri: http://localhost:8082/user

management:
  endpoints:
    web:
      exposure:
        include: "*"
  #        SpringBootActuator监控暴露所有接口
  endpoint:
    health:
      show-details: ALWAYS

ukulele:
  rest-template:
    readTimeout: 60000
    connectTimeout: 60000
  redis:
    database: 0
    password:
    timeout: 30
    mode: single #sentinel/cluster/single
    #    连接池
    pool:
      max-idle: 16
      min-idle: 8
      max-active: 8
      max-wait: 3000
      conn-timeout: 3000
      so-timeout: 3000
      size: 10
    #    单机
    single:
      address: redis://127.0.0.1:6379
    lock:
      waitTime: 60
      leaseTime: 60
# oauth2 配置
#ukulele:
#  oauth2:
#    url-permit-all:
#      - /actuator/**
#      - /mobile/**
#      - /auth/**
#      - /admin/code/*
#      - /admin/smsCode/*
#      - /admin/user/info
#      - /admin/menu/userMenu
#      - /swagger-resources/**
#      - /swagger-ui.html
#      - /*/v2/api-docs
#      - /swagger/api-docs
#      - /webjars/**